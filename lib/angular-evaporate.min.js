!function(){"use strict";var t,e,r="angular-evaporate";"undefined"!=typeof module&&module.exports?(module.exports=r,t=require("angular"),e=require("evaporate")):"undefined"!=typeof window&&(t=window.angular,e=window.Evaporate),t.module(r,[]).value("Evaporate",e).factory("AngularEvaporateException",[function(){var t=function(e,r){return this instanceof t?(this.code=e,void(this.message=r)):new t(e,r)};return t.prototype.toString=function(){return"AngularEvaporateException: ["+this.code+"] "+this.message},t}]).factory("AngularEvaporateUpload",["$timeout","AngularEvaporateException",function(e,r){var a=function(n,o){if(!(this instanceof a))throw new r("INVALID_USAGE","constructor called without the new keyword");t.extend(this,n.$config,o),this.name||(this.name=n.$namer(this)),this.contentType=this.file.type||"binary/octet-stream",this.$url=n.$url+this.name,["started","paused","resumed","pausing","cancelled","complete","info","warn","error","progress"].forEach(function(t){var r="function"==typeof this[t]?this[t]:void 0,a=this;this[t]=function(){var o,i=arguments[0],s=Date.now();a["$"+t]=s,"progress"===t?(o=(s-a.$started)/1e3,a.$percent=Math.round(1e4*i)/100,a.$percent&&(a.$seconds=Math.round((100-a.$percent)/a.$percent*o),a.$speed=n.$speeder(a.file.size*i/o))):"complete"===t||"cancelled"===t?a.$stopped=s:"info"===t||"warn"===t?a["$"+t+"Msg"]=i:"error"===t?(a.$errorMsg=i,a.$stopped=s):"paused"===t?(delete a.$pausing,delete a.$resumed):"resumed"===t?(delete a.$pausing,delete a.$paused):"pausing"===t&&(delete a.$paused,delete a.$resumed),r&&r.apply(a,arguments),n.$apply&&e(n.$apply)}},this)};return a}]).factory("AngularEvaporate",["$timeout","Evaporate","AngularEvaporateUpload","AngularEvaporateException",function(t,e,r,a){var n=function(t){if(!(this instanceof n))throw new a("INVALID_USAGE","constructor called without the new keyword");e.apply(this,arguments),this.$uploads=[],this.$config={},this.$url=(t.aws_url||"http://s3.amazonaws.com/")+t.bucket+"/"};return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.$namer=function(t){return t.file.name},n.prototype.$speeder=function(t){var e=["","K","M","G","T","P","E","Z","Y"],r=Math.floor(Math.log(t)/Math.log(1024)),a=t/Math.pow(1024,r);return a.toFixed(2).replace(".00","")+" "+e[r]+"B/s"},n.prototype.$enqueue=function(){var e=new r(this,arguments[0]);return e.$start=this.$start.bind.apply(this.$start,[this,e].concat(Array.prototype.slice.call(arguments,1))),e.$dequeue=this.$dequeue.bind(this,e),this.$uploads.push(e),this.$apply&&t(this.$apply),e},n.prototype.$dequeue=function(e){var r=this.$uploads.findIndex(function(t){return t===this},e);return r!==-1&&(this.$uploads.splice(r,1),this.$apply&&t(this.$apply)),r},n.prototype.$start=function(e){return e.$id=this.add.apply(this,arguments),delete e.$start,e.$pause=this.pause.bind(this,e.$id),e.$resume=this.resume.bind(this,e.$id),e.$cancel=this.cancel.bind(this,e.$id),this.$apply&&t(this.$apply),e.$id},n.prototype.$add=function(){var t=this.$enqueue.apply(this,arguments);return t.$start()},n.prototype.$startAll=function(){this.$uploads.forEach(function(t){t.$start&&t.$start()})},n.prototype.$pauseAll=function(){return this.pause.apply(this,[void 0].concat(Array.prototype.slice.call(arguments)))},n.prototype.$resumeAll=function(){return this.resume.apply(this,[void 0].concat(Array.prototype.slice.call(arguments)))},n.prototype.$cancelAll=function(){this.$uploads.forEach(function(t){t.$cancel&&t.$cancel()})},n.prototype.$dequeueAll=function(){this.$uploads=[],this.$apply&&t(this.$apply)},n}]).directive("angularEvaporate",[function(){return{restrict:"A",scope:{ae:"=angularEvaporate"},link:function(e,r){e.$on("$destroy",function(){r.unbind("change")}),r.bind("change",function(a){if(e.ae&&e.ae.supported){var n=e.ae.$slothmode?"$enqueue":"$add";t.forEach(a.target.files,function(t){e.ae[n]({file:t})}),e.ae.$rinserepeat&&r.val(null)}})}}}])}();
//# sourceMappingURL=angular-evaporate.min.js.map