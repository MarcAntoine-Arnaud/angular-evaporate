!function(t,e){"use strict";t.module("evaporate",[]).value("Evaporate",e).factory("AngularEvaporateException",[function(){var t=function(e,n){return this instanceof t?(this.code=e,void(this.message=n)):new t(e,n)};return t.prototype.toString=function(){return"AngularEvaporateException: ["+this.code+"] "+this.message},t}]).factory("AngularEvaporate",["$timeout","Evaporate","AngularEvaporateException",function(e,n,o){var r=function(){if(!(this instanceof r))throw new o("INVALID_USAGE","constructor called without the new keyword");n.apply(this,arguments),this.$add=this.add,delete this.add,this.$uploads=[]};return r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.prototype.$config={},r.prototype.$apply=function(){},r.prototype.$name=function(t){return t.addAt+"-"+t.file.name},r.prototype.setConfig=function(e){var n=t.copy(e);n.contentType||(n.contentType="binary/octet-stream"),this.$config=n},r.prototype.setApply=function(t){this.$apply=t},r.prototype.setNamer=function(t){this.$namer=t},r.prototype.getUploads=function(){return this.$uploads},r.prototype.getUploadById=function(t){return t?this.$uploads.find(function(e){return e.id===t}):void 0},r.prototype.add=function(n){var o=t.extend({},this.$config,n);o.name||(o.name=this.$namer(o));var r=this.$apply;return["started","paused","resumed","pausing","cancelled","complete","info","warn","error","progress"].forEach(function(t){var n="function"==typeof o[t]?o[t]:void 0;o[t]=function(){var i=arguments[0],a=Date.now();o["$"+t+"At"]=a,"progress"===t&&(o.$percent=Math.round(1e4*i)/100,o.$seconds=Math.round((100-o.percent)/o.percent*(a-o.startedAt)/1e3)),"info"!==t&&"warn"!==t&&"error"!==t||(o["$"+t+"Msg"]=i),n&&n.apply(o,arguments),e(r)}}),o.$id=this.$add.apply(this,arguments),o.pause=this.pause.bind(this,o.$id),o.resume=this.resume.bind(this,o.$id),o.cancel=this.cancel.bind(this,o.$id),this.$uploads.push(o),o.$id},r}]).directive("evaporate",["AngularEvaporate",function(e){return{restrict:"A",scope:{configNew:"=configNew",configAdd:"=configAdd",uploads:"=uploads"},link:function(n,o){var r=new e(n.configNew);n.uploads=r.getUploads(),n.$watch("configAdd",function(t,e){t!==e&&r.setConfig(t)}),o.bind("change",function(e){t.forEach(e.target.files,function(t){r.add({file:t})})})}}}])}(angular,Evaporate);